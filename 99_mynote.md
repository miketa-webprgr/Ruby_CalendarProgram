# カレンダーアプリ作成

## 概要

伊藤さんのブログで紹介されていた。

> 「たのしいRuby」に載っている、オーソドックスなカレンダー作成問題です。  
> DateクラスのAPIさえわかれば、あとは基礎的なプログラミング知識だけでコードが書けると思います。  

課題は以下のとおり。  
Rubyを実行すると、自動で今月のカレンダーが表示されるようなRubyプログラムを作成する課題。  
（年月を入力すると、自動でカレンダーを作成してくれるものを作ってもよさそう）  

> 課題  
> **Date クラスを使って、今月の１日と月末の日付と曜日を求め、次のような形式でカレンダーを表示させてください**  
>
> - [アウトプットのネタに困ったらこれ！？Ruby初心者向けのプログラミング問題を集めてみた（全10問） \- give IT a try](https://blog.jnito.com/entry/2019/05/03/121235)

なお、作成にあたってはDateクラスについて理解するとよい。  
使う際は、`require 'date'`をすること。  

> - [class Date \(Ruby 2\.7\.0 リファレンスマニュアル\)](https://docs.ruby-lang.org/ja/latest/class/Date.html)  

プログラムを実行すると、以下のように出力されるようにしなければならない。  

```text
     July 2020
 Su Mo Tu We Th Fr Sa
           1  2  3  4
  5  6  7  8  9 10 11
 12 13 14 15 16 17 18
 19 20 21 22 23 24 25
 26 27 28 29 30 31
```

## カレンダープログラム作成にあたって

まず、参考になりそうなDateクラスのメソッドを洗い出す。  
なんとなく、これを知っていればいけそうな気がした。  

- todayメソッド
  - 今日の日付を出力
- strftimeメソッド
  - フォーマットを指定することで「今日は何曜日か」「今日は何月か」などを出力できる

次に、Rubyのリファレンスに参考になりそうな情報を貼付する。  

```rb
a = Date.new(1993, 2, 24)
b = Date.parse('1993-02-24')
b += 10

b - a            #=> 10
b.year           #=> 1993
b.strftime('%a') #=> "Sat"

yesterday = Date.today - 1
```

strftimeによって、指定できるフォーマットについて、  
使いそうなものを以下に貼付する。  

```text
%a: 曜日の省略名(Sun, Mon ... )
%b: 月の省略名(Jan, Feb ... )
%e: 日。一桁の場合、半角空白で埋める ( 1..31)
%n: 改行 (\n)
%U: 週を表す数。最初の日曜日が第1週の始まり(00-53)
%u: 月曜日を1とした、曜日の数値表現 (1..7)
%W: 週を表す数。最初の月曜日が第1週の始まり(00-53)
%w: 曜日を表す数。日曜日が0(0-6)
%Y: 西暦を表す数
%y: 西暦の下2桁(00-99)
```

また、インスタンスメソッドに使えそうなものが多くあった。  
ざっと使えそうなものをメモした。  

似たようなメソッドがあるので、惜しいメソッドがあれば、ドキュメントを改めて参照したい。  

```text
- 〜日後
  - self + n -> Date
- 〜日前
  - self - x -> Rational | Date
- 〜月前
  - self << n -> Date
- 〜月後
  - self >> n -> Date
- 日付の比較
  - self <=> other -> -1 | 0 | 1 | nil
- 日付が一致するか確認
  - self === other -> bool
- 暦週の日 (曜日) を返す (1-7、月曜は1)
  - cwday -> Integer
- 暦週を返す (1-53)
  - cweek -> Integer
- 暦週における年を返す
  - cwyear -> Integer
- 月の日を返す (1-31)
  - day -> Integer
- 月曜日なら真を返す（他の曜日もある）
  - monday? -> bool
- n 日後を返す（月・年もある）
  - next_day(n = 1) -> Date
- n 日前を返す（月・年もある）
  - prev_day(n = 1) -> Date
```

## カレンダープログラムの作成手順

具体的にコードを書く前に、日本語で考えてみる。  

とりあえず、カレンダーの上から順番に考えていく。  
分かりやすいよう、もう一度カレンダーを貼付する。  

```text
     July 2020
 Su Mo Tu We Th Fr Sa
           1  2  3  4
  5  6  7  8  9 10 11
 12 13 14 15 16 17 18
 19 20 21 22 23 24 25
 26 27 28 29 30 31
```

作成手順であるが、以下のとおりとする。  
あとは、作りながら考えることにしよう。  

- todayメソッドで「今日の日付」を取得する（仮に**2020/07/17(Fri)**とする）
- 「今日の日付」から「July」と「2020」を出力
- 「Su Mo Tu...」を出力する
- 「July」の初日（1日）を出力する（その曜日に合わせて、表示箇所を指定）
- 土曜日になるまで同じ行に出力し、日曜日の場合は改行する
- その月の最終日まで日付を出力し続ける
  - **日付と曜日はハッシュにして、セットで管理しておくと良さそう**
  - 「July」の初日を出力する際に取得した曜日を活用する
